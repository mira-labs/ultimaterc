# ~/.zshrc for Linux

source ~/bin/shell-configs/colors.sh

autoload -Uz vcs_info
precmd() { vcs_info }

setopt PROMPT_SUBST

PROMPT_SYMBOL="$ZSH_GREENâ¯$ZSH_RESET"
GIT_BRANCH='${vcs_info_msg_0_}'

export PS1="${ZSH_CYAN}%~${ZSH_RESET} ${ZSH_YELLOW}${GIT_BRANCH}${ZSH_RESET} ${PROMPT_SYMBOL} "

alias ll='ls -lh --color=auto'
alias la='ls -lha --color=auto'
alias gs='git status'
alias gc='git commit'
alias gp='git push'
alias gl='git log --oneline --graph --decorate'
alias ..='cd ..'
alias ...='cd ../..'
alias update='sudo apt update && sudo apt upgrade'
alias c='clear'
alias e='exit'
alias h='history'
alias v='vim'
alias j='jobs'
alias k='kill'
alias x='exit'
alias d='cd'
alias p='pwd'
alias m='man'
alias pk='pkill -i'
alias k9='kill -9'
alias k9n='kill -9 $(pgrep -f)'

function install_tools_linux_once() {
  local pkgs=(coreutils git bat exa fd-find ripgrep fzf htop tldr thefuck ncdu glow btop)
  local missing=()
  for pkg in "${pkgs[@]}"; do
    if ! command -v "$pkg" &>/dev/null; then
      missing+=("$pkg")
    fi
  done
  if [ ${#missing[@]} -gt 0 ]; then
    echo "Installing missing tools: ${missing[*]}"
    sudo apt update
    sudo apt install -y "${missing[@]}"
  fi
}
if [ -z "$ZSHRC_LINUX_TOOLS_INSTALLED" ]; then
  install_tools_linux_once
  export ZSHRC_LINUX_TOOLS_INSTALLED=1
fi
